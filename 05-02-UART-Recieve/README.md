# 软件开发环境

## 1. 工具准备

### 开发与编译所需要的软件

* VSCode + PlatformIO 插件
* sdcc

### 烧录所需要的工具

* stcgal

## 2. 软件环境的安装

*待完善*

# 硬件环境

## 所需器件

* 51单片机开发板(我用的普中-A2)
* LCD1602 模块
* 电脑到 51 开发板的USB-串口连接线(就是安卓手机的老式数据线)

## 程序功能介绍

1. 51 开发板启动后, 通过 9600 波特率向PC端发送一句中文, "你好,我是51单片机"
2. 51 开发板进入等待.
3. 此时, PC端可以使用串口助手通过串口连线使用同样的波特率向 51 单片机发送数据.
4. 当 51 开发板收到数据后,串口中断会将收到的数据,
   1. 如果PC端输入的16进制数据是 07, 则LCD1602 会清屏
   2. 如果PC端输入的16进制数据是 08, 则LCD1602 会换行;超过两行会清屏.
   3. 如果是可显示的 Ascii 码, 会在LCD1602上显示.
   4. 其它数据则不显示.

## 程序说明

1. 串口通信使用 9600 波特率.
2. 51 开发板固定使用定时器 1 做为产生波特率的源
3. 串口的设置: (1) 模式一; (2) 可接收; (3) 波特率不翻倍; (4) 使用串口中断程序来处理数据接收.

## 波特率与定时器 1 初值溢出率的关系

定时器1,工作方式2,即 8位自动重装,可以提高定时器的精度

TH1 初值 = 256 - fosc / 波特率 / 32 / 12 * 2^SMOD

因为是8位自动重装,所以 TL1 初值也应设置, 与 TH1 初值相同.